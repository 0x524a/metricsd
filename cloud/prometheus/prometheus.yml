# Prometheus configuration for receiving metrics from remote metricsd clients
# This configuration enables the remote write receiver to accept metrics
# from edge devices running metricsd

global:
  scrape_interval: 60s
  evaluation_interval: 60s
  external_labels:
    monitor: 'metricsd-cloud'

# Alertmanager configuration (optional, configure when needed)
# alerting:
#   alertmanagers:
#     - static_configs:
#         - targets:
#           - alertmanager:9093

# Rule files to load (optional)
# rule_files:
#   - /etc/prometheus/rules/*.yml

# Scrape configuration - minimal since we receive via remote write
scrape_configs:
  # Scrape Prometheus itself for self-monitoring
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']
        labels:
          instance: 'prometheus-server'

# Note: Metrics from metricsd clients are received via the remote write API
# which is enabled with --web.enable-remote-write-receiver flag
# 
# The remote write endpoint is: http://<prometheus-host>:9090/api/v1/write
#
# All metrics received will include:
# - hostname: automatically added by metricsd client
# - Any custom global_labels configured on the client
#
# Example PromQL queries to filter by hostname:
# - system_cpu_usage_total_percent{hostname="edge-device-01"}
# - system_memory_usage_percent{hostname=~"edge-.*"}
# - sum by (hostname) (system_cpu_usage_total_percent)

